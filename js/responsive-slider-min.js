// Generated by CoffeeScript 1.6.1
/*!
  # Responsive Slider widget script
  # by w3widgets
  #
  # Author: Lukasz Kokoszkiewicz
  #
  # Copyright Â© Lukasz Kokoszkiewicz 2013 All Rights Reserved
*/
(function(){!function(a){var b,c,d,e,f,g,h,i,j,k;return b=function(a,b){return this.$element=a,this.$slides=this.$element.find(".slides ul li"),this.$slides.length<1&&(this.$slides=this.$element.find('[data-group="slides"] ul li')),this.$prevNext=this.$element.find("[data-jump]"),this.$pages=this.$element.find("[data-jump-to]"),this.$slidesContainer=this.$element.find('[data-group="slides"]'),this.$rel=this.$element.find('[data-group="slides"] ul'),this.$rel.css("position","relative"),this.slideChangeInProgress=!1,this.interval=!1,this.options=b,this.current=b.current,this.set(2,!0),null},b.prototype={getGlobalWidth:function(){return this.$element.width()},updateControls:function(){return this.$pages.removeClass("active"),this.$pages.filter("[data-jump-to="+(this.current-1)+"]").addClass("active")},runAnimations:function(){var b,c;return c=this,b=a(this.$slides[this.current-1]).find("[data-animate]"),b.each(function(){var b;return b=a(this),c.options.animations[b.data("animate")](b,b.data("delay"),b.data("length"))})},hideAnimatedCaptions:function(b){return a(this.$slides[b-1]).find("[data-animate]").css({opacity:0})},calculateScroll:function(a){var b;return b=this.getGlobalWidth(),(a-1)*b},resize:function(){return this.$rel.css("right",this.calculateScroll(this.current))},jump:function(a,b,c){var d,e,f,g;return null==b&&(b=this.options.transitionTime),null==c&&(c=!1),f=this,a===f.current&&(c=!0),this.$slides.length>=a&&!this.slideChangeInProgress&&(e=this.getGlobalWidth(),c||this.hideAnimatedCaptions(a),g=void 0,this.options.parallax&&(this.currentBgPosition=parseInt(f.$slidesContainer.css("background-position")),this.moveStartScroll=parseInt(this.$rel.css("right"),10),g=function(){var a;return a=Math.round(f.currentBgPosition-(f.moveStartScroll-parseInt(f.$rel.css("right"),10))*f.options.parallaxDistance*f.options.parallaxDirection)+"px 0",f.$slidesContainer.css("background-position",a)}),d={duration:b,step:g,done:function(){return 1===a?(f.hideAnimatedCaptions(f.$slides.length-1),f.set(f.$slides.length-1)):a===f.$slides.length?(f.hideAnimatedCaptions(2),f.set(2)):f.current=a,f.updateControls(),c||f.runAnimations(),f.options.onSlideChange.call(this),null},always:function(){return f.slideChangeInProgress=!1,null}},this.slideChangeInProgress=!0,this.$rel.animate({right:this.calculateScroll(a)},d)),null},set:function(a,b){var c;return null==b&&(b=!1),c=this.getGlobalWidth(),this.$rel.css("right",this.calculateScroll(a)),this.current=a,this.updateControls(),null},movestart:function(){return this.options.parallax&&(this.currentBgPosition=parseInt(this.$slidesContainer.css("background-position"))),this.hideAnimatedCaptions(this.current-1),this.hideAnimatedCaptions(this.current+1),this.moveStartScroll=parseInt(this.$rel.css("right"),10),this.$rel.stop(),this.$rel.addClass("drag"),this.timeStart=new Date},move:function(a){var b;return this.options.parallax&&(b=Math.round(this.currentBgPosition-a.distX*this.options.parallaxDistance*this.options.parallaxDirection)+"px 0",this.$slidesContainer.css("background-position",b)),this.$rel.css("right",this.moveStartScroll-a.distX)},moveend:function(a){var b,c,d,e,f;return b=Math.abs(a.distX),e=(new Date).getTime()-this.timeStart.getTime(),d=this.getGlobalWidth(),c=b/d,f=e/c*(1-c),f=1e3>f?f:1e3,this.$rel.removeClass("drag"),b<d/this.options.moveDistanceToSlideChange?this.jump(this.current,f,!0):a.distX<0?this.next(f):this.prev(f)},prev:function(a,b){return null==a&&(a=this.options.transitionTime),null==b&&(b=!1),this.jump(this.current-1,a,b),this.options.onSlidePrev.call(this)},next:function(a,b){return null==a&&(a=this.options.transitionTime),null==b&&(b=!1),this.jump(this.current+1,a,b),this.options.onSlideNext.call(this)}},a.fn.responsiveSlider=function(c){var d,e,f,g,h,i;return h=this,f=a.extend({},a.fn.responsiveSlider.defaults,"object"==typeof c&&c),f.animations=a.fn.responsiveSlider.animations,g={next:"next",prev:"prev"},d=function(a,b){return clearInterval(b),a.off("mouseover"),a.off("mouseleave"),null},e=function(c){var e,g,h,i;return f=a.metadata?a.extend({},f,c.metadata()):f,i=c.find("ul li"),i.length>1&&(e=a(i[0]),g=a(i[i.length-1]),e.before(g.clone()),g.after(e.clone())),c.data("slider",h=new b(c,f)),f.autoplay&&(h.interval=setInterval(function(){return h.next()},f.interval),c.on("mouseover",function(){return clearInterval(h.interval)}),c.on("mouseleave",function(){return clearInterval(h.interval),h.interval=setInterval(function(){return h.next()},f.interval)})),a(window).on("resize",function(){return h.resize()}),c.find("[data-jump]").on("click",function(){return h[a(this).data("jump")](),!1}),c.find("[data-jump-to]").on("click",function(){return h.jump(a(this).data("jump-to")+1),f.onSlidePageChange.call(this),!1}),f.touch?c.find('[data-group="slide"]').on("movestart",function(a){return d(c,h.interval),h.movestart(a)}).on("move",function(a){return h.move(a)}).on("moveend",function(a){return h.moveend(a)}):void 0},i=function(){return h.each(function(){var b,d;return b=a(this),d=b.data("slider"),d?"string"==typeof c?d[g[c]]():"number"==typeof c&&d.jump(Math.abs(c)+1):e(b,f),b})},a.fn.responsiveSlider.run?i():(a(window).on("load",i),a.fn.responsiveSlider.run=!0)},a.fn.responsiveSlider.animations={slideAppearRightToLeft:function(a,b,c){var d,e;return null==b&&(b=0),null==c&&(c=300),e={"margin-left":100,"margin-right":-100},a.css(e),d=function(){return e={"margin-left":0,"margin-right":0,opacity:1},a.animate(e,c)},b>0?setTimeout(d,b):d()},slideAppearLeftToRight:function(a,b,c){var d,e;return null==b&&(b=0),null==c&&(c=300),e={"margin-left":-100,"margin-right":100},a.css(e),d=function(){return e={"margin-left":0,"margin-right":0,opacity:1},a.animate(e,c)},b>0?setTimeout(d,b):d()},slideAppearUpToDown:function(a,b,c){var d,e;return null==b&&(b=0),null==c&&(c=300),e={"margin-top":100,"margin-bottom":-100},a.css(e),d=function(){return e={"margin-top":0,"margin-bottom":0,opacity:1},a.animate(e,c)},b>0?setTimeout(d,b):d()},slideAppearDownToUp:function(a,b,c){var d,e;return null==b&&(b=0),null==c&&(c=300),e={"margin-top":-100,"margin-bottom":100},a.css(e),d=function(){return e={"margin-top":0,"margin-bottom":0,opacity:1},a.animate(e,c)},b>0?setTimeout(d,b):d()}},a.fn.responsiveSlider.defaults={autoplay:!1,interval:5e3,touch:!0,parallax:!1,parallaxDistance:.1,parallaxDirection:1,transitionTime:300,moveDistanceToSlideChange:4,onSlideChange:function(){},onSlideNext:function(){},onSlidePrev:function(){},onSlidePageChange:function(){}},a.fn.responsiveSlider.run=!1,i=a('[data-spy="responsive-slider"]'),i.length&&(e={},(c=i.data("autoplay"))&&(e.autoplay=c),(d=i.data("interval"))&&(e.interval=d),(f=i.data("parallax"))&&(e.parallax=f),(h=i.data("parallax-distance"))&&(e.parallaxDistance=parseInt(h,10)),(g=i.data("parallax-direction"))&&(e.parallaxDirection=parseInt(g,10)),(j=i.data("touch"))||(e.touch=j),(k=i.data("transitiontime"))&&(e.transitionTime=k),i.responsiveSlider(e)),null}(jQuery)}).call(this);